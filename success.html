<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Pendaftaran Berhasil</title>

<style>
* { box-sizing: border-box; }
body {
    min-height: 100vh;
    margin: 0;
    display: flex;
    flex-direction: column;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    font-size: 15px;
    line-height: 1.6;
    color: #1f2937;
    background-color: #f8fafc;
}
main {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 24px 16px;
}
.card {
    max-width: 420px;
    width: 100%;
    text-align: center;
    background: white;
    border: 1px solid #e5e7eb;
    border-radius: 12px;
    padding: 28px 20px;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
}
.icon { font-size: 40px; margin-bottom: 12px; }
h1 { font-size: 20px; margin-bottom: 6px; color: #047857; }
.subtitle { color: #6b7280; font-size: 14px; margin-bottom: 24px; }
.info { text-align: left; margin-bottom: 20px; background: #f9fafb; padding: 15px; border-radius: 8px; }
.info p { margin: 4px 0; font-size: 14px; border-bottom: 1px solid #edf2f7; padding-bottom: 4px; }
.qr { margin: 20px 0; padding: 10px; background: white; display: inline-block; border: 1px solid #eee; }
.qr img { width: 180px; max-width: 100%; display: block; }
.download-btn {
    display: block;
    margin: 16px 0 6px;
    padding: 12px;
    background-color: #047857;
    color: #ffffff;
    text-decoration: none;
    border-radius: 8px;
    font-size: 14px;
    font-weight: 600;
}
.note { font-size: 13px; color: #374151; margin-top: 12px; }
footer { text-align: center; padding: 14px 10px; font-size: 12px; color: #6b7280; }
</style>
</head>

<body>

<main>
<div class="card">
    <div class="icon">✅</div>

    <h1 id="title">Pendaftaran Berhasil</h1>
    <div class="subtitle" id="subtitle">Terima kasih telah melakukan pendaftaran</div>

    <div class="info">
        <p><strong id="lblName">Nama Lengkap:</strong> <span id="valName">-</span></p>
        <p><strong id="lblID">ID Tiket:</strong> <span id="valID" style="font-family: monospace; font-weight: bold;">-</span></p>
    </div>

    <div class="qr">
        <img id="qrImg" src="" alt="QR Code">
    </div>

    <a href="#" id="downloadBtn" class="download-btn" onclick="downloadQR()">
        ⬇️ Simpan QR Code (Screenshot)
    </a>

    <div class="note" id="note">
        Simpan QR Code ini untuk keperluan <strong>check-in</strong> saat acara.
    </div>
</div>
</main>

<footer>© 2025 — Yayasan Ibadurrahman Islamic Center</footer>

<script>
(function () {
    // 1. Ambil data dari URL (dikirim dari form pendaftaran)
    const urlParams = new URLSearchParams(window.location.search);
    const nama = urlParams.get('nama') || "Jamaah";
    const idTiket = urlParams.get('id') || "ERROR";

    // 2. Tampilkan data ke halaman
    document.getElementById("valName").textContent = nama;
    document.getElementById("valID").textContent = idTiket;

    // 3. Generate QR Code menggunakan API
    const qrUrl = `https://api.qrserver.com/v1/create-qr-code/?size=250x250&data=${idTiket}`;
    document.getElementById("qrImg").src = qrUrl;

    // 4. Multilanguage logic
    const lang = navigator.language || navigator.userLanguage;
    const t = {
        id: {
            title: "Pendaftaran Berhasil",
            subtitle: "Terima kasih telah melakukan pendaftaran",
            name: "Nama Lengkap:",
            idLbl: "ID Tiket:",
            download: "⬇️ Simpan QR Code",
            note: "Simpan QR Code ini untuk keperluan <strong>check-in</strong> saat acara."
        },
        ja: {
            title: "登録が完了しました",
            subtitle: "お申し込みありがとうございます",
            name: "氏名:",
            idLbl: "チケットID:",
            download: "⬇️ QRコードを保存",
            note: "当日は<strong>受付（チェックイン）</strong>の際にこのQRコードをご提示ください。"
        },
        en: {
            title: "Registration Successful",
            subtitle: "Thank you for your registration",
            name: "Full Name:",
            idLbl: "Ticket ID:",
            download: "⬇️ Save QR Code",
            note: "Please save this QR code for <strong>check-in</strong> on the event day."
        }
    };

    let current = t.id;
    if (lang.startsWith("ja")) current = t.ja;
    else if (lang.startsWith("en")) current = t.en;

    document.getElementById("title").innerHTML = current.title;
    document.getElementById("subtitle").innerHTML = current.subtitle;
    document.getElementById("lblName").innerHTML = current.name;
    document.getElementById("lblID").innerHTML = current.idLbl;
    document.getElementById("downloadBtn").innerHTML = current.download;
    document.getElementById("note").innerHTML = current.note;
})();

// Fungsi sederhana untuk instruksi simpan gambar
function downloadQR() {
    alert("Silakan tekan lama pada gambar QR dan pilih 'Download Image' atau ambil Screenshot halaman ini.");
}
</script>

</body>
</html>
