<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title data-id="Pendaftaran Berhasil" data-ja="登録完了" data-en="Registration Successful"></title>

<style>
* { box-sizing: border-box; }
body {
    margin: 0;
    font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
    background: #ffffff;
    color: #1f2937;
}
main {
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 24px;
}
.card {
    width: 100%;
    max-width: 420px;
    border: 1px solid #e5e7eb;
    border-radius: 14px;
    padding: 26px 22px;
    text-align: center;
}
.icon { font-size: 42px; margin-bottom: 10px; }
h1 { margin: 0; font-size: 20px; }
.subtitle { font-size: 14px; color: #6b7280; margin-bottom: 20px; }
.info {
    background: #f9fafb;
    padding: 14px;
    border-radius: 10px;
    text-align: left;
    font-size: 14px;
}
.info p { margin: 5px 0; }
.qr img {
    width: 180px;
    margin: 18px auto;
    display: block;
}
button {
    width: 100%;
    padding: 12px;
    background: #111827;
    color: #fff;
    border: none;
    border-radius: 8px;
    font-weight: 600;
    cursor: pointer;
}
.note { font-size: 13px; margin-top: 10px; color: #374151; }
footer { text-align: center; font-size: 12px; color: #6b7280; padding: 12px; }
</style>
</head>

<body>

<main>
<div class="card">
    <div class="icon">✅</div>
    <h1 data-id="Pendaftaran Berhasil" data-ja="登録が完了しました" data-en="Registration Successful"></h1>
    <div class="subtitle"
         data-id="Terima kasih telah melakukan pendaftaran"
         data-ja="お申し込みありがとうございます"
         data-en="Thank you for your registration"></div>

    <div class="info">
        <p><strong data-id="Nama" data-ja="氏名" data-en="Name"></strong>: <span id="resNama">-</span></p>
        <p><strong data-id="ID Peserta" data-ja="参加ID" data-en="Participant ID"></strong>: <span id="resID">-</span></p>
        <p><strong data-id="Email"></strong>: <span id="resEmail">-</span></p>
        <p><strong data-id="Domisili" data-ja="居住地" data-en="City"></strong>: <span id="resDomisili">-</span></p>
        <p><strong data-id="No. HP / WhatsApp" data-ja="電話番号" data-en="Phone"></strong>: <span id="resHP">-</span></p>
        <p><strong data-id="Usia" data-ja="年齢" data-en="Age"></strong>: <span id="resUsia">-</span></p>
        <p><strong data-id="Jenis Kelamin" data-ja="性別" data-en="Gender"></strong>: <span id="resJK">-</span></p>
    </div>

    <div class="qr" id="qrContainer"></div>

    <button onclick="downloadQR()"
            data-id="Download QR Code"
            data-ja="QRコードをダウンロード"
            data-en="Download QR Code"></button>

    <div class="note"
         data-id="Simpan QR Code ini untuk check-in saat acara"
         data-ja="当日のチェックイン時にこのQRコードをご提示ください"
         data-en="Please save this QR code for event check-in"></div>
</div>
</main>

<footer>© 2026 — Yayasan Ibadurrahman Islamic Center</footer>

<script>
// =================== BACA DATA URL ===================
const params = new URLSearchParams(window.location.search);

const fields = {
    resNama: "nama_lengkap",
    resID: "id",
    resEmail: "email",
    resDomisili: "domisili",
    resHP: "no_hp",
    resUsia: "usia",
    resJK: "jk"
};

Object.keys(fields).forEach(id => {
    document.getElementById(id).innerText = params.get(fields[id]) || "-";
});

// =================== QR CODE ===================
const participantID = params.get("id");
if (participantID) {
    const qrURL = `https://api.qrserver.com/v1/create-qr-code/?size=300x300&data=${participantID}`;
    document.getElementById("qrContainer").innerHTML =
        `<img src="${qrURL}" id="qrImage" alt="QR Code">`;
}

// =================== DOWNLOAD QR ===================
async function downloadQR() {
    const img = document.getElementById("qrImage");
    if (!img) return;

    const res = await fetch(img.src);
    const blob = await res.blob();
    const a = document.createElement("a");
    a.href = URL.createObjectURL(blob);
    a.download = "QR_Pendaftaran.png";
    a.click();
}

// =================== AUTO TRANSLATE ===================
(function () {
    const lang = navigator.language || "id";
    let current = "id";
    if (lang.startsWith("ja")) current = "ja";
    else if (lang.startsWith("en")) current = "en";

    document.querySelectorAll("[data-id]").forEach(el => {
        el.textContent = el.dataset[current] || el.dataset.id;
    });
})();
</script>

</body>
</html>
